# AOS-Farm - Synthetic Data Generation & Test Orchestration Platform

## Overview
AOS-Farm is a web-based platform designed for enterprise-scale testing of autonomOS modules. It achieves this through synthetic data generation, chaos engineering, and comprehensive test orchestration. The platform supports four distinct lab environments (End-to-End, AOD, AAM, DCL) to facilitate targeted testing of different autonomOS components. Its primary purpose is to enable robust performance, resilience, and functional testing of autonomOS, leveraging synthetic data and controlled chaos injection to simulate real-world scenarios.

## User Preferences
- **Design System:** IBM Carbon Design System with IBM Plex Sans typography
- **Color Scheme:** Enterprise-appropriate with dark mode support
- **Spacing:** Consistent primitives (p-6 cards, gap-4/gap-6 grids)
- **Components:** Shadcn UI with proper variant usage
- **Development Workflow:**
    - Never modify `vite.config.ts` or `package.json` scripts
    - Use `npm run db:push` for schema changes
    - Follow design_guidelines.md for all UI work
    - All new endpoints must use `getOrCreateSessionTenant(req)` for tenant derivation
    - Add `data-testid` attributes to all interactive elements

## System Architecture
The platform is built with a client-server architecture using React 18 (TypeScript, Vite, Wouter, TanStack Query, Shadcn UI, Tailwind CSS) for the frontend and Express.js (TypeScript, PostgreSQL, Drizzle ORM) for the backend.

**Key Architectural Decisions & Features:**
- **Four Lab Environments:** Dedicated environments for End-to-End, AOD (AOS Discover), AAM (Asset & Availability Management), and DCL (Data Connectivity Layer) module testing.
- **Test Orchestration:** Scenario-based testing with configurable scale (small/medium/large). Features run creation/management, status tracking, and a historical view with auto-refresh.
- **Synthetic Data Generation:** Generates diverse datasets including enterprise assets (applications, services, hosts), business data (customers, invoices, subscriptions, transactions with FK relationships), and time-series events (logs, network flows, auth events). Data is tenant-scoped and generated on-demand via API. Mock CRM/ERP API endpoints are also provided.
- **Chaos Engineering:** Implements response-level chaos injection (latency, errors, timeouts) with configurable failure rates for resilience testing.
- **UI/UX:** Adheres to IBM Plex Sans typography (Carbon Design System), supports dark/light mode, and features a responsive design with real-time status updates and toast notifications.
- **HTTP Integration Architecture:** Utilizes an `HttpModuleClient` for communication with autonomOS modules and a `RunOrchestrator` for background job processing. This orchestrator manages a sequential job queue, executes HTTP calls to modules, and persists status updates to the database, ensuring non-blocking test execution. Runtime validation schemas (Zod) are used for module responses.
- **Tenant Isolation:** Implemented server-side tenant derivation (IP-based sessions) with all API endpoints filtered/validated by the session tenant to prevent cross-tenant data access.

**Database Schema Highlights:**
- `farm_scenarios`: Defines test scenarios.
- `farm_runs`: Stores test execution records.
- `synthetic_assets`, `synthetic_customers`, `synthetic_invoices`, `synthetic_subscriptions`, `synthetic_transactions`, `synthetic_events`: Store generated synthetic data.

## External Dependencies
- **PostgreSQL:** Primary database for storing scenarios, runs, and synthetic data.
- **autonomOS Modules:** Integration with external autonomOS modules (AOD, AAM, DCL, FinOps, RevOps) via HTTP. Base URLs are configurable via environment variables.
- **Vite:** Frontend build tool.
- **Wouter:** Client-side routing library.
- **TanStack Query:** Data fetching library.
- **Shadcn UI:** UI component library built on Radix primitives.
- **Tailwind CSS:** Utility-first CSS framework.
- **Drizzle ORM:** TypeScript ORM for database interaction.
- **Express.js:** Web application framework for the backend.
- **Zod:** Schema declaration and validation library.