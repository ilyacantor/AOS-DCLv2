# NLQ Intent Canon - Gold Standard Test Cases
# Domain-agnostic intent matching validation
# ~150 test cases across finance, ops, IT, security, sales, HR, infra
#
# Status values:
#   RESOLVED - Clear intent, can answer
#   RESOLVED_WITH_WARNING - Answerable but with caveats
#   AMBIGUOUS - Multiple valid interpretations, needs clarification
#   UNSUPPORTED - Cannot be answered with current definitions

version: "1.0"
created: "2026-01-25"

cases:
  # =============================================================================
  # FINANCE - Revenue & ARR
  # =============================================================================
  - id: fin_001
    question: "What is our current ARR?"
    expected:
      status: RESOLVED
      intent:
        metric: arr
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_002
    question: "What was our ARR last month?"
    expected:
      status: RESOLVED
      intent:
        metric: arr
        grain: month
        time:
          mode: calendar
          spec: calendar_month:last
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_003
    question: "Show me top 5 customers by revenue"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 5
        direction: top

  - id: fin_004
    question: "Top 10 deals in the pipeline"
    expected:
      status: RESOLVED
      intent:
        metric: pipeline
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [deal]
        limit: 10
        direction: top

  - id: fin_005
    question: "What is our revenue?"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_006
    question: "Revenue by customer"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [customer]
        limit: null
        direction: null

  - id: fin_007
    question: "How much revenue did we make last quarter?"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: quarter
        time:
          mode: calendar
          spec: calendar_quarter:last
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_008
    question: "Revenue in the last 30 days"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: day
        time:
          mode: rolling
          spec: rolling_days:30
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_009
    question: "YTD revenue"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: year
        time:
          mode: calendar
          spec: calendar_ytd
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_010
    question: "Q2 revenue breakdown"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: revenue
        grain: quarter
        time:
          mode: calendar
          spec: calendar_quarter:Q2
        aggregation: total
        group_by: []
        limit: null
        direction: null
      warning: "YEAR_ASSUMED: Q2 assumed to be current fiscal year"

  # =============================================================================
  # FINANCE - Spend & Cost
  # =============================================================================
  - id: fin_011
    question: "What is our total spend?"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_012
    question: "Top 5 vendors by spend"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [vendor]
        limit: 5
        direction: top

  - id: fin_013
    question: "SaaS spend by vendor"
    expected:
      status: RESOLVED
      intent:
        metric: saas_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [vendor]
        limit: null
        direction: null

  - id: fin_014
    question: "What is our burn rate?"
    expected:
      status: RESOLVED
      intent:
        metric: burn_rate
        grain: month
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_015
    question: "Monthly burn rate"
    expected:
      status: RESOLVED
      intent:
        metric: burn_rate
        grain: month
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_016
    question: "What is our unallocated spend?"
    expected:
      status: RESOLVED
      intent:
        metric: unallocated_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_017
    question: "What is our unallocated cloud spend?"
    expected:
      status: RESOLVED
      intent:
        metric: unallocated_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_018
    question: "Show me cloud costs"
    expected:
      status: RESOLVED
      intent:
        metric: cloud_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: fin_019
    question: "Spend last month vs this month"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: month
        time:
          mode: calendar
          spec: calendar_month:comparison
        aggregation: delta
        group_by: []
        limit: null
        direction: null

  - id: fin_020
    question: "Which vendors increased spend MoM?"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend_delta
        grain: month
        time:
          mode: calendar
          spec: calendar_month:mom
        aggregation: delta
        group_by: [vendor]
        limit: null
        direction: top

  # =============================================================================
  # FINANCE - Deltas & Trends
  # =============================================================================
  - id: fin_021
    question: "What changed month over month?"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: What metric changed? (revenue, spend, headcount, etc.)"

  - id: fin_022
    question: "Revenue change MoM"
    expected:
      status: RESOLVED
      intent:
        metric: revenue_delta
        grain: month
        time:
          mode: calendar
          spec: calendar_month:mom
        aggregation: delta
        group_by: []
        limit: null
        direction: null

  - id: fin_023
    question: "Top vendor cost changes MoM"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend_delta
        grain: month
        time:
          mode: calendar
          spec: calendar_month:mom
        aggregation: ranking
        group_by: [vendor]
        limit: 10
        direction: top

  - id: fin_024
    question: "QoQ revenue growth"
    expected:
      status: RESOLVED
      intent:
        metric: revenue_delta
        grain: quarter
        time:
          mode: calendar
          spec: calendar_quarter:qoq
        aggregation: delta
        group_by: []
        limit: null
        direction: null

  - id: fin_025
    question: "Year over year spend comparison"
    expected:
      status: RESOLVED
      intent:
        metric: spend_delta
        grain: year
        time:
          mode: calendar
          spec: calendar_year:yoy
        aggregation: delta
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # SALES / CRM
  # =============================================================================
  - id: crm_001
    question: "Who are our top customers?"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 10
        direction: top
      warning: "LIMIT_DEFAULTED: No limit specified, defaulting to top 10"

  - id: crm_002
    question: "Top 5 customers"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 5
        direction: top

  - id: crm_003
    question: "Show me the pipeline"
    expected:
      status: RESOLVED
      intent:
        metric: pipeline
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: crm_004
    question: "Pipeline by stage"
    expected:
      status: RESOLVED
      intent:
        metric: pipeline
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [stage]
        limit: null
        direction: null

  - id: crm_005
    question: "Deals closing this quarter"
    expected:
      status: RESOLVED
      intent:
        metric: pipeline
        grain: quarter
        time:
          mode: calendar
          spec: calendar_quarter:current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: crm_006
    question: "Top 10 deals by value"
    expected:
      status: RESOLVED
      intent:
        metric: deal_value
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [deal]
        limit: 10
        direction: top

  - id: crm_007
    question: "Customer concentration"
    expected:
      status: RESOLVED
      intent:
        metric: customer_concentration
        grain: none
        time:
          mode: none
          spec: current
        aggregation: percent
        group_by: [customer]
        limit: null
        direction: null

  - id: crm_008
    question: "Bottom 5 customers by revenue"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 5
        direction: bottom

  - id: crm_009
    question: "New customers last month"
    expected:
      status: RESOLVED
      intent:
        metric: customer_count
        grain: month
        time:
          mode: calendar
          spec: calendar_month:last
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: crm_010
    question: "Lost customers this year"
    expected:
      status: RESOLVED
      intent:
        metric: customer_churn
        grain: year
        time:
          mode: calendar
          spec: calendar_ytd
        aggregation: count
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # INFRASTRUCTURE / SRE
  # =============================================================================
  - id: infra_001
    question: "How are our SLOs?"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: infra_002
    question: "How are our SLOs trending?"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: trend
        group_by: []
        limit: null
        direction: null

  - id: infra_003
    question: "SLO attainment by service"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: [service]
        limit: null
        direction: null

  - id: infra_004
    question: "Which services are at risk?"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: [service]
        limit: null
        direction: null

  - id: infra_005
    question: "Deployment frequency"
    expected:
      status: RESOLVED
      intent:
        metric: deploy_frequency
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: infra_006
    question: "How often do we deploy?"
    expected:
      status: RESOLVED
      intent:
        metric: deploy_frequency
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: infra_007
    question: "What is our MTTR?"
    expected:
      status: RESOLVED
      intent:
        metric: mttr
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: infra_008
    question: "Mean time to recovery"
    expected:
      status: RESOLVED
      intent:
        metric: mttr
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: infra_009
    question: "Change failure rate"
    expected:
      status: RESOLVED
      intent:
        metric: change_failure_rate
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: infra_010
    question: "Lead time for changes"
    expected:
      status: RESOLVED
      intent:
        metric: lead_time
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: infra_011
    question: "DORA metrics"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Which DORA metric? (deploy frequency, lead time, MTTR, change failure rate)"

  - id: infra_012
    question: "Show me our uptime"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: infra_013
    question: "Incidents last week"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: week
        time:
          mode: calendar
          spec: calendar_week:last
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: infra_014
    question: "Incident count by severity"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: [severity]
        limit: null
        direction: null

  - id: infra_015
    question: "Open incidents"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # SECURITY / AOD
  # =============================================================================
  - id: sec_001
    question: "Show me security findings"
    expected:
      status: RESOLVED
      intent:
        metric: security_findings
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  - id: sec_002
    question: "Critical security findings"
    expected:
      status: RESOLVED
      intent:
        metric: security_findings
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  - id: sec_003
    question: "Security findings by severity"
    expected:
      status: RESOLVED
      intent:
        metric: security_findings
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: [severity]
        limit: null
        direction: null

  - id: sec_004
    question: "What are our zombie resources?"
    expected:
      status: RESOLVED
      intent:
        metric: zombie_resources
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  - id: sec_005
    question: "Idle resources"
    expected:
      status: RESOLVED
      intent:
        metric: zombie_resources
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  - id: sec_006
    question: "Top 10 zombie resources by cost"
    expected:
      status: RESOLVED
      intent:
        metric: zombie_resources
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [resource]
        limit: 10
        direction: top

  - id: sec_007
    question: "Resources without owners"
    expected:
      status: RESOLVED
      intent:
        metric: identity_gaps
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  - id: sec_008
    question: "Identity gaps"
    expected:
      status: RESOLVED
      intent:
        metric: identity_gaps
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  - id: sec_009
    question: "Orphan resources"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Do you mean unused resources (zombies) or resources without owners (identity gaps)?"

  - id: sec_010
    question: "Unowned spend"
    expected:
      status: RESOLVED
      intent:
        metric: identity_gaps
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # AMBIGUOUS / UNDERSPECIFIED CASES
  # =============================================================================
  - id: amb_001
    question: "What changed?"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: What changed? (revenue, spend, headcount, etc.)"

  - id: amb_002
    question: "Show me the numbers"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Which numbers? (revenue, spend, customers, etc.)"

  - id: amb_003
    question: "How are we doing?"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Which aspect? (revenue, SLOs, pipeline, etc.)"

  - id: amb_004
    question: "What's the trend?"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Trend of what? (revenue, spend, incidents, etc.)"

  - id: amb_005
    question: "Give me a summary"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Summary of what? (financial, operational, etc.)"

  - id: amb_006
    question: "Top performers"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Top performers in what? (customers, vendors, services, etc.)"

  - id: amb_007
    question: "What's happening?"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Cannot determine metric or domain"

  - id: amb_008
    question: "Status update"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Status of what? (incidents, SLOs, pipeline, etc.)"

  - id: amb_009
    question: "Show me everything"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "SCOPE_TOO_BROAD: Cannot show all data; please specify a metric"

  - id: amb_010
    question: "Compare everything"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "SCOPE_TOO_BROAD: Cannot compare without specific metrics"

  # =============================================================================
  # TIME SEMANTICS - CALENDAR VS ROLLING
  # =============================================================================
  - id: time_001
    question: "Revenue last month"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: month
        time:
          mode: calendar
          spec: calendar_month:last
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_002
    question: "Revenue in the past 30 days"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: day
        time:
          mode: rolling
          spec: rolling_days:30
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_003
    question: "Spend last week"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: week
        time:
          mode: calendar
          spec: calendar_week:last
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_004
    question: "Spend in the past 7 days"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: day
        time:
          mode: rolling
          spec: rolling_days:7
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_005
    question: "Last quarter's revenue"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: quarter
        time:
          mode: calendar
          spec: calendar_quarter:last
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_006
    question: "Revenue past 90 days"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: day
        time:
          mode: rolling
          spec: rolling_days:90
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_007
    question: "This month's spend"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: month
        time:
          mode: calendar
          spec: calendar_month:current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_008
    question: "Year to date revenue"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: year
        time:
          mode: calendar
          spec: calendar_ytd
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: time_009
    question: "Customers last year"
    expected:
      status: RESOLVED
      intent:
        metric: customer_count
        grain: year
        time:
          mode: calendar
          spec: calendar_year:last
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: time_010
    question: "Incidents past 24 hours"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: day
        time:
          mode: rolling
          spec: rolling_hours:24
        aggregation: count
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # RANKING - EXPLICIT VS IMPLICIT
  # =============================================================================
  - id: rank_001
    question: "Top 5 customers"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 5
        direction: top

  - id: rank_002
    question: "Top customers"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 10
        direction: top
      warning: "LIMIT_DEFAULTED: No limit specified, defaulting to top 10"

  - id: rank_003
    question: "Bottom 3 vendors by cost"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [vendor]
        limit: 3
        direction: bottom

  - id: rank_004
    question: "First 10 customers"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 10
        direction: top

  - id: rank_005
    question: "Highest spending vendors"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: vendor_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [vendor]
        limit: 10
        direction: top
      warning: "LIMIT_DEFAULTED: No limit specified, defaulting to top 10"

  - id: rank_006
    question: "Largest deals"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: deal_value
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [deal]
        limit: 10
        direction: top
      warning: "LIMIT_DEFAULTED: No limit specified, defaulting to top 10"

  - id: rank_007
    question: "Worst performing services"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [service]
        limit: 10
        direction: bottom
      warning: "LIMIT_DEFAULTED: No limit specified, defaulting to bottom 10"

  - id: rank_008
    question: "Show all customers"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: [customer]
        limit: null
        direction: null

  - id: rank_009
    question: "List vendors"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: [vendor]
        limit: null
        direction: null

  - id: rank_010
    question: "Top 100 customers by revenue"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 100
        direction: top
      warning: "LIMIT_CLAMPED: Requested 100, clamped to maximum 100"

  # =============================================================================
  # GROUPING / DIMENSIONS
  # =============================================================================
  - id: group_001
    question: "Revenue by region"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [region]
        limit: null
        direction: null

  - id: group_002
    question: "Spend by team"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [team]
        limit: null
        direction: null

  - id: group_003
    question: "Incidents by service"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: [service]
        limit: null
        direction: null

  - id: group_004
    question: "Revenue per customer"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [customer]
        limit: null
        direction: null

  - id: group_005
    question: "Cost breakdown by vendor"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [vendor]
        limit: null
        direction: null

  # =============================================================================
  # COMPARISON / DELTA
  # =============================================================================
  - id: comp_001
    question: "Revenue growth"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: revenue_delta
        grain: month
        time:
          mode: calendar
          spec: calendar_month:mom
        aggregation: delta
        group_by: []
        limit: null
        direction: null
      warning: "PERIOD_ASSUMED: Defaulting to month-over-month comparison"

  - id: comp_002
    question: "Spend increase"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: spend_delta
        grain: month
        time:
          mode: calendar
          spec: calendar_month:mom
        aggregation: delta
        group_by: []
        limit: null
        direction: null
      warning: "PERIOD_ASSUMED: Defaulting to month-over-month comparison"

  - id: comp_003
    question: "How has revenue changed?"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: revenue_delta
        grain: month
        time:
          mode: calendar
          spec: calendar_month:mom
        aggregation: delta
        group_by: []
        limit: null
        direction: null
      warning: "PERIOD_ASSUMED: Defaulting to month-over-month comparison"

  - id: comp_004
    question: "Compare this month to last month"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: Compare what? (revenue, spend, incidents, etc.)"

  - id: comp_005
    question: "Revenue vs last year"
    expected:
      status: RESOLVED
      intent:
        metric: revenue_delta
        grain: year
        time:
          mode: calendar
          spec: calendar_year:yoy
        aggregation: delta
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # HEALTH / STATUS
  # =============================================================================
  - id: health_001
    question: "Service health"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: health_002
    question: "System status"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: health_003
    question: "Are there any issues?"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: health_004
    question: "Pipeline health"
    expected:
      status: RESOLVED
      intent:
        metric: pipeline
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: health_005
    question: "What's at risk?"
    expected:
      status: AMBIGUOUS
      intent: null
      warning: "METRIC_UNDERSPECIFIED: What's at risk? (SLOs, deals, customers, etc.)"

  # =============================================================================
  # PERCENTAGE / SHARE
  # =============================================================================
  - id: pct_001
    question: "What percentage of revenue comes from top 5 customers?"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: percent
        group_by: [customer]
        limit: 5
        direction: top

  - id: pct_002
    question: "Revenue concentration"
    expected:
      status: RESOLVED
      intent:
        metric: customer_concentration
        grain: none
        time:
          mode: none
          spec: current
        aggregation: percent
        group_by: [customer]
        limit: null
        direction: null

  - id: pct_003
    question: "Share of spend by vendor"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: percent
        group_by: [vendor]
        limit: null
        direction: null

  - id: pct_004
    question: "What's the SLO breach rate?"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: percent
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # INVENTORY / COUNT
  # =============================================================================
  - id: inv_001
    question: "How many customers do we have?"
    expected:
      status: RESOLVED
      intent:
        metric: customer_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: inv_002
    question: "Number of incidents"
    expected:
      status: RESOLVED
      intent:
        metric: incident_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: inv_003
    question: "Total deal count"
    expected:
      status: RESOLVED
      intent:
        metric: deal_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: inv_004
    question: "How many vendors?"
    expected:
      status: RESOLVED
      intent:
        metric: vendor_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: count
        group_by: []
        limit: null
        direction: null

  - id: inv_005
    question: "Resource inventory"
    expected:
      status: RESOLVED
      intent:
        metric: resource_count
        grain: none
        time:
          mode: none
          spec: current
        aggregation: inventory
        group_by: []
        limit: null
        direction: null

  # =============================================================================
  # EDGE CASES - RESTRAINT
  # =============================================================================
  - id: edge_001
    question: "Predict next quarter's revenue"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "FORECASTING_UNSUPPORTED: DCL does not support predictions"

  - id: edge_002
    question: "Why did revenue drop?"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "CAUSAL_ANALYSIS_UNSUPPORTED: DCL cannot determine causation"

  - id: edge_003
    question: "What should we do about churn?"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "RECOMMENDATION_UNSUPPORTED: DCL provides data, not recommendations"

  - id: edge_004
    question: "Revenue for customer ABC Corp"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: edge_005
    question: "Delete the old data"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "WRITE_OPERATION_UNSUPPORTED: DCL is read-only"

  - id: edge_006
    question: "Update customer record"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "WRITE_OPERATION_UNSUPPORTED: DCL is read-only"

  - id: edge_007
    question: "Send me a report every Monday"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "SCHEDULING_UNSUPPORTED: DCL does not support scheduled reports"

  - id: edge_008
    question: "Email the CEO"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "COMMUNICATION_UNSUPPORTED: DCL cannot send emails"

  - id: edge_009
    question: ""
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "EMPTY_QUERY: No question provided"

  - id: edge_010
    question: "?"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "INVALID_QUERY: Cannot parse question"

  # =============================================================================
  # NATURAL VARIATIONS
  # =============================================================================
  - id: nat_001
    question: "What's our ARR look like?"
    expected:
      status: RESOLVED
      intent:
        metric: arr
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: nat_002
    question: "Can you show me the top customers?"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 10
        direction: top
      warning: "LIMIT_DEFAULTED: No limit specified, defaulting to top 10"

  - id: nat_003
    question: "I need to see spend breakdown"
    expected:
      status: RESOLVED_WITH_WARNING
      intent:
        metric: spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null
      warning: "GROUPING_UNDERSPECIFIED: No grouping specified for breakdown"

  - id: nat_004
    question: "Give me ARR numbers"
    expected:
      status: RESOLVED
      intent:
        metric: arr
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: []
        limit: null
        direction: null

  - id: nat_005
    question: "How's revenue trending?"
    expected:
      status: RESOLVED
      intent:
        metric: revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: trend
        group_by: []
        limit: null
        direction: null

  - id: nat_006
    question: "What do our SLOs look like right now?"
    expected:
      status: RESOLVED
      intent:
        metric: slo_attainment
        grain: none
        time:
          mode: none
          spec: current
        aggregation: health
        group_by: []
        limit: null
        direction: null

  - id: nat_007
    question: "Show me where we're spending money"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: total
        group_by: [vendor]
        limit: null
        direction: null

  - id: nat_008
    question: "Who's our biggest customer?"
    expected:
      status: RESOLVED
      intent:
        metric: customer_revenue
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [customer]
        limit: 1
        direction: top

  - id: nat_009
    question: "What's eating up our budget?"
    expected:
      status: RESOLVED
      intent:
        metric: spend
        grain: none
        time:
          mode: none
          spec: current
        aggregation: ranking
        group_by: [vendor]
        limit: 10
        direction: top

  - id: nat_010
    question: "Are we over budget?"
    expected:
      status: UNSUPPORTED
      intent: null
      warning: "BUDGET_COMPARISON_UNSUPPORTED: Budget targets not available"
