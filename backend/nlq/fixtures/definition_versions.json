[
  {
    "id": "recognized_revenue_v1",
    "tenant_id": "default",
    "definition_id": "recognized_revenue",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["revenue_recognized"],
      "measure": {"op": "sum", "field": "recognized_amount"},
      "filters": {},
      "allowed_grains": ["day", "week", "month", "quarter", "year"],
      "allowed_dims": ["customer", "service_line", "region", "contract", "product"],
      "joins": {"customer_id": "customer", "service_line": "service_line", "region": "region"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "billings_v1",
    "tenant_id": "default",
    "definition_id": "billings",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["invoice_posted"],
      "measure": {"op": "sum", "field": "posted_amount"},
      "filters": {},
      "allowed_grains": ["day", "week", "month", "quarter"],
      "allowed_dims": ["customer", "region"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "cash_collected_v1",
    "tenant_id": "default",
    "definition_id": "cash_collected",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["payment_received"],
      "measure": {"op": "sum", "field": "cash_amount"},
      "filters": {},
      "allowed_grains": ["day", "week", "month", "quarter"],
      "allowed_dims": ["customer", "payment_method"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "arr_v1",
    "tenant_id": "default",
    "definition_id": "arr",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["subscription_started", "subscription_changed", "subscription_canceled"],
      "measure": {"op": "point_in_time_sum", "field": "arr"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["customer", "service_line", "region"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "mrr_v1",
    "tenant_id": "default",
    "definition_id": "mrr",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["subscription_started", "subscription_changed", "subscription_canceled"],
      "measure": {"op": "point_in_time_sum", "field": "mrr"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["customer", "service_line"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "nrr_v1",
    "tenant_id": "default",
    "definition_id": "nrr",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["subscription_started", "subscription_changed", "subscription_canceled"],
      "measure": {"op": "cohort_retention", "field": "arr", "cohort_field": "start_date"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["customer", "service_line"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "dso_v1",
    "tenant_id": "default",
    "definition_id": "dso",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["invoice_posted", "payment_applied"],
      "measure": {"op": "avg_days_between", "start_field": "invoice_posted.effective_at", "end_field": "payment_applied.effective_at"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["customer", "region"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "ar_balance_v1",
    "tenant_id": "default",
    "definition_id": "ar_balance",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["invoice_posted", "payment_applied", "credit_note_issued"],
      "measure": {"op": "event_sourced_balance", "credits": ["invoice_posted.posted_amount"], "debits": ["payment_applied.applied_amount", "credit_note_issued.credit_amount"]},
      "filters": {},
      "allowed_grains": ["day", "month"],
      "allowed_dims": ["customer", "invoice", "aging_bucket"],
      "joins": {"customer_id": "customer", "invoice_id": "invoice"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "gross_margin_v1",
    "tenant_id": "default",
    "definition_id": "gross_margin",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["revenue_recognized", "cost_allocated"],
      "measure": {"op": "difference", "minuend": "revenue_recognized.recognized_amount", "subtrahend": "cost_allocated.allocated_amount"},
      "filters": {"cost_allocated.allocation_method": {"op": "eq", "value": "cogs"}},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["service_line", "customer", "region"],
      "joins": {"service_line": "service_line"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "services_revenue_v1",
    "tenant_id": "default",
    "definition_id": "services_revenue",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["revenue_recognized"],
      "measure": {"op": "sum", "field": "recognized_amount"},
      "filters": {"service_line": {"op": "in", "values": ["Professional Services", "Consulting", "Implementation"]}},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["customer", "service_line", "region"],
      "joins": {"customer_id": "customer", "service_line": "service_line", "region": "region"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "deploy_frequency_v1",
    "tenant_id": "default",
    "definition_id": "deploy_frequency",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["deployment_completed"],
      "measure": {"op": "count"},
      "filters": {"status": {"op": "eq", "value": "success"}},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["service", "repo", "environment", "team"],
      "joins": {"service_id": "service", "repo_id": "repo"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "mttr_v1",
    "tenant_id": "default",
    "definition_id": "mttr",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["incident_opened", "incident_resolved"],
      "measure": {"op": "avg", "field": "ttr_minutes"},
      "filters": {},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["service", "severity", "root_cause_category"],
      "joins": {"service_id": "service"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "change_failure_rate_v1",
    "tenant_id": "default",
    "definition_id": "change_failure_rate",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["deployment_completed", "incident_opened"],
      "measure": {"op": "ratio", "numerator": "deployment_completed.status='failed'", "denominator": "deployment_completed"},
      "filters": {},
      "allowed_grains": ["week", "month"],
      "allowed_dims": ["service", "repo", "team"],
      "joins": {"service_id": "service"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "incident_rate_v1",
    "tenant_id": "default",
    "definition_id": "incident_rate",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["incident_opened"],
      "measure": {"op": "count"},
      "filters": {},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["service", "severity"],
      "joins": {"service_id": "service"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "slo_attainment_v1",
    "tenant_id": "default",
    "definition_id": "slo_attainment",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["slo_breached"],
      "measure": {"op": "ratio", "numerator": "1 - breach_minutes/total_minutes", "denominator": "1"},
      "filters": {},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["service", "slo"],
      "joins": {"service_id": "service", "slo_id": "slo"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "cloud_cost_per_service_v1",
    "tenant_id": "default",
    "definition_id": "cloud_cost_per_service",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["cloud_cost_incurred"],
      "measure": {"op": "sum", "field": "cost_amount"},
      "filters": {},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["service", "cloud_provider", "cost_category", "cost_center"],
      "joins": {"service_id": "service", "cost_center_id": "cost_center"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "throughput_v1",
    "tenant_id": "default",
    "definition_id": "throughput",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["work_item_completed"],
      "measure": {"op": "count"},
      "filters": {},
      "allowed_grains": ["day", "week", "sprint"],
      "allowed_dims": ["team", "project", "work_item_type"],
      "joins": {"team_id": "team", "project_id": "project"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "cycle_time_v1",
    "tenant_id": "default",
    "definition_id": "cycle_time",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["work_item_state_changed"],
      "measure": {"op": "avg", "field": "cycle_time_hours"},
      "filters": {"to_state": {"op": "eq", "value": "done"}},
      "allowed_grains": ["week", "sprint", "month"],
      "allowed_dims": ["team", "project", "work_item_type"],
      "joins": {"team_id": "team", "project_id": "project"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "sla_compliance_v1",
    "tenant_id": "default",
    "definition_id": "sla_compliance",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["sla_met", "sla_breached"],
      "measure": {"op": "ratio", "numerator": "sla_met.count", "denominator": "sla_met.count + sla_breached.count"},
      "filters": {},
      "allowed_grains": ["week", "month"],
      "allowed_dims": ["service", "team", "sla"],
      "joins": {"service_id": "service"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "support_load_v1",
    "tenant_id": "default",
    "definition_id": "support_load",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["ticket_opened", "ticket_resolved"],
      "measure": {"op": "net_count", "opened": "ticket_opened", "closed": "ticket_resolved"},
      "filters": {},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["customer", "service", "priority", "category"],
      "joins": {"customer_id": "customer", "service_id": "service"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "revenue_growth_v1",
    "tenant_id": "default",
    "definition_id": "revenue_growth",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["revenue_recognized"],
      "measure": {"op": "period_over_period_growth", "field": "recognized_amount", "period": "quarter"},
      "filters": {},
      "allowed_grains": ["quarter", "year"],
      "allowed_dims": ["service_line", "region"],
      "joins": {"service_line": "service_line", "region": "region"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "churn_rate_v1",
    "tenant_id": "default",
    "definition_id": "churn_rate",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["subscription_canceled", "subscription_started"],
      "measure": {"op": "ratio", "numerator": "subscription_canceled.ending_arr", "denominator": "starting_arr"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["service_line", "customer_segment"],
      "joins": {},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "gross_margin_pct_v1",
    "tenant_id": "default",
    "definition_id": "gross_margin_pct",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["revenue_recognized", "cost_allocated"],
      "measure": {"op": "ratio", "numerator": "gross_margin", "denominator": "recognized_revenue"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["service_line", "region"],
      "joins": {},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "bookings_v1",
    "tenant_id": "default",
    "definition_id": "bookings",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["deal_won"],
      "measure": {"op": "sum", "field": "deal_amount"},
      "filters": {},
      "allowed_grains": ["day", "week", "month", "quarter"],
      "allowed_dims": ["customer", "service_line", "region", "deal_type"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "pipeline_v1",
    "tenant_id": "default",
    "definition_id": "pipeline",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["opportunity_created", "opportunity_stage_changed"],
      "measure": {"op": "point_in_time_sum", "field": "expected_amount"},
      "filters": {},
      "allowed_grains": ["day", "week", "month"],
      "allowed_dims": ["customer", "stage", "region"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "security_finding_mttr_v1",
    "tenant_id": "default",
    "definition_id": "security_finding_mttr",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["security_finding_raised", "security_finding_resolved"],
      "measure": {"op": "avg", "field": "mttr_hours"},
      "filters": {},
      "allowed_grains": ["week", "month"],
      "allowed_dims": ["service", "severity", "category"],
      "joins": {"service_id": "service"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  },
  {
    "id": "onboarding_time_v1",
    "tenant_id": "default",
    "definition_id": "onboarding_time",
    "version": "v1",
    "status": "published",
    "spec": {
      "required_events": ["deal_won", "customer_onboarded"],
      "measure": {"op": "avg", "field": "onboarding_duration_days"},
      "filters": {},
      "allowed_grains": ["month", "quarter"],
      "allowed_dims": ["customer", "service_line"],
      "joins": {"customer_id": "customer"},
      "time_field": "effective_at"
    },
    "published_at": "2024-01-01T00:00:00Z"
  }
]
